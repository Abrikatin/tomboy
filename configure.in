AC_INIT(Tomboy/Tomboy.cs)
AC_CANONICAL_SYSTEM
AM_INIT_AUTOMAKE(tomboy, 0.1.1)
AM_MAINTAINER_MODE
AM_CONFIG_HEADER(config.h)

AC_PROG_INSTALL
AM_PROG_LIBTOOL

AC_PATH_PROG(PKG_CONFIG, pkg-config, no)
if test "x$PKG_CONFIG" = "xno"; then
	AC_MSG_ERROR([You need to install pkg-config])
fi

if test "x$MCSTEST" = "xno"; then
	AC_MSG_ERROR([You need to install mcs (from mono)])
fi

# Gdk and Atk are needed for libtrayicon
GDK20_MINIMUM_VERSION=2.2.3
ATK_MINIMUM_VERSION=1.2.4

PKG_CHECK_MODULES(GDK20, gdk-2.0 >= $GDK20_MINIMUM_VERSION)
AC_SUBST(GDK20_CFLAGS)
AC_SUBST(GDK20_LIBS)

PKG_CHECK_MODULES(ATK, atk >= $ATK_MINIMUM_VERSION)
AC_SUBST(ATK_CFLAGS)
AC_SUBST(ATK_LIBS)

# We need 2.0.6 which uses Pango squiggly underline, older 
# versions make misspellings look like internal note links.
GTKSPELL_MINIMUM_VERSION=2.0.6

# Just check for GtkSpell here, as we call into it from C#.
# http://gtkspell.sourceforge.net/
PKG_CHECK_MODULES(GTKSPELL, gtkspell-2.0 >= $GTKSPELL_MINIMUM_VERSION)

PKG_CHECK_MODULES(TOMBOY, gtk-sharp gnome-sharp)
AC_SUBST(TOMBOY_LIBS)

AC_OUTPUT([
Makefile
Tomboy/Makefile
TrayIcon/Makefile
TrayIcon/libtrayicon/Makefile
tomboy.spec
])
